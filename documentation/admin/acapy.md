# ACA-Py configuration

<!-- TOC GitLab -->

- [Supported Protocols](#supported-protocols)
- [Proof of Credentials](#proof-of-credentials)
- [DIDComm Endpoint](#didcomm-endpoint)
- [Public DID](#public-did)
- [Configuration properties](#configuration-properties)

<!-- /TOC -->

ACA-Py (stands for Aries Cloud Agent - Python) is a foundation for building Verifiable Credential (VC) ecosystems.
Read more in the [official documentation](https://github.com/hyperledger/aries-cloudagent-python).

## Supported Protocols

Information about supported protocols of the deployed ACA-Py can be found [here](https://github.com/openwallet-foundation/acapy/blob/0.11.3/SupportedRFCs.md). The current supported protocols are documented [here](https://github.com/openwallet-foundation/acapy/blob/main/docs/features/SupportedRFCs.md)

## Proof of Credentials

The ACA-Py proves the trustworthiness of issued credentials by implementing the ARIES RFC 0037 protocol.
For the ACA-Py, there is a test execution engine which contains a BDD-test `0037-present-proof.feature` (see [here](https://github.com/hyperledger/aries-agent-test-harness)).

## DIDComm Endpoint

ACA-Py implements the Aries RFC 0005 `DID communication (DIDComm)` protocol.
More information about this protocol are shown [here](https://github.com/hyperledger/aries-rfcs/tree/main/concepts/0005-didcomm).

## Public DID

The agent must be run with a public DID.
In order to support AIP 1.0 credential issuance, the public DID must be registered on a publicly available ledger, e.x. BC Gov Ledger.
The DID is then provided to ACA-Py via the `--seed` startup argument in the form of a seed to use for the creation of a public DID.

## Configuration properties

In the current development setup the ACA-Py instance is [started](../../deploy/local/docker-compose/acapy.yml) with some specific options:

| CLI argument                           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `--admin`                              | Specify the host and port on which to run the administrative server. If not provided, no admin server is made available                                                                                                                                                                                                                                                                                                                                                                                              |
| `--admin-insecure-mode`                | Run the admin web server in insecure mode. The admin server will be publicly available to anyone who has access to the interface. Either this parameter or the `--api-key` parameter MUST be specified.                                                                                                                                                                                                                                                                                                              |
| `--auto-provision`                     | If the requested profile does not exist, initialize it with the given parameters                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `--auto-respond-credential-offer`      | Automatically respond to Indy credential offers with a credential request.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `--auto-respond-credential-proposal`   | Auto-respond to credential proposals with corresponding credential offers                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `--auto-respond-credential-request`    | Auto-respond to credential requests with corresponding credentials                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `--auto-respond-presentation-proposal` | Auto-respond to presentation proposals with corresponding presentation requests                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `--auto-respond-presentation-request`  | Automatically respond to Indy presentation requests with a constructed presentation if a corresponding credential can be retrieved for every referent in the presentation request.                                                                                                                                                                                                                                                                                                                                   |
| `--auto-store-credential`              | Automatically store an issued credential upon receipt.                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `--endpoint`                           | Specifies the endpoints to put into DIDDocs to inform other agents of where they should send messages destined for this agent. Each endpoint could be one of the specified inbound transports for this agent, or the endpoint could be that of another agent (e.g. 'https://example.com/agent-endpoint') if the routing of messages to this agent by a mediator is configured. The first endpoint specified will be used in invitations. The endpoints are used in the formation of a connection with another agent. |
| `--genesis-url`                        | Specifies the url from which to download the genesis transactions.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `--inbound-transport`                  | REQUIRED. Defines the inbound transport(s) on which the agent listens for receiving messages from other agents. This parameter can be specified multiple times to create multiple interfaces. Built-in inbound transport types include 'http' and 'ws'. However, other transports can be loaded by specifying an absolute module path.                                                                                                                                                                               |
| `--label`                              | Specifies the label for this agent. This label is publicized (self-attested) to other agents as part of forming a connection.                                                                                                                                                                                                                                                                                                                                                                                        |
| `--outbound-transport`                 | REQUIRED. Defines the outbound transport(s) on which the agent will send outgoing messages to other agents. This parameter can be passed multiple times to supoort multiple transport types. Supported outbound transport types are 'http' and 'ws'                                                                                                                                                                                                                                                                  |
| `--seed`                               | Specifies the seed to use for the creation of a public DID for the agent to use with a Hyperledger Indy ledger, or a local (`--wallet-local-did`) DID. If public, the DID must already exist on the ledger.                                                                                                                                                                                                                                                                                                          |
| `--wallet-key`                         | Specifies the master key value used to open the wallet.                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `--wallet-name`                        | Specifies the wallet name to be used by the agent. This is useful if your deployment has multiple wallets.                                                                                                                                                                                                                                                                                                                                                                                                           |
| `--wallet-storage-config`              | Specifies the storage configuration to use for the wallet. This is required if you are for using 'postgres_storage' wallet storage type. This configuration maps to the Indy sdk postgres plugin "(PostgresConfig)                                                                                                                                                                                                                                                                                                   |
| `--wallet-storage-creds`               | Specifies the storage credentials to use for the wallet. This is required if you are for using 'postgres_storage' wallet. This configuration maps to the Indy sdk postgres plugin (PostgresCredentials). NOTE: admin_user must have the CREATEDB role or else initialization will fail.                                                                                                                                                                                                                              |
| `--wallet-storage-type`                | Specifies the type of Indy wallet backend to use. Supported internal storage types are 'basic' (memory), 'default' (sqlite), and 'postgres_storage'.                                                                                                                                                                                                                                                                                                                                                                 |
| `--wallet-type`                        | Specifies the type of Indy wallet provider to use. Not that type: `indy` is deprecated and superseded by `askar`.                                                                                                                                                                                                                                                                                                                                                                                                    |
| `--webhook-url`                        | URL where ACA-Py sends webhooks containing internal state changes. This is set to the URL of the `ssi` service.                                                                                                                                                                                                                                                                                                                                                                                                      |
